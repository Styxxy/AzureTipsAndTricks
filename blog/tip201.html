<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 201 - Creating Custom VM Images in Azure using Packer | Azure Tips and Tricks</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
  <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.3c8037e7.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/117.166a91ba.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.7e2bb633.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.05d31551.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.b2baa5b4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.9170fb24.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.db4ae1e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.cc0eb189.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.da875741.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.65a9f212.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.39c6cf76.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.c0e58b3c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.4889f0ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.77ad0453.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.d63ac547.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.fdb7fd8b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.08eda14a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.fd7b527b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.755cbd26.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.4f60b440.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.36345303.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.f964d86f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.82866bee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.c3e96823.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.8c784284.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.dff05149.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.7f2ee2fe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.725af1e1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.164e41ac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.284f71e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.c034d6a3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.5e68b598.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.7077a6b2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.44d4cb6a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.b4f711a2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.a5258a5e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.3956c2e0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.314bea8e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.477d7d79.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.7f9a05fe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.6b0d9484.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.ae675c87.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.1503c76e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.36f2020c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.65f80022.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.c20ef169.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.2551e223.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.5f6e7ca5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.d74b32f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.99980a58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.b62fa893.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.d07c0611.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.b462e85f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.5714004e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.68971990.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.9641a009.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.3b49f91c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.08325296.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.8f65ac2b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.4272ce5f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.8352673a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.f3922de5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.a787bd0c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.63c02e2b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.7e938151.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.6153ac2c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.70debb8a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.d7ee5677.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.dfcd176f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.71652dae.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.749a29d3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.d4133383.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.a4db35f2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.e99be6d3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.ddf21603.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.51e7bf20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.acb50913.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.b386d290.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.f2dcbace.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.37b83fc7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.12c87892.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.a16ae1e6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.aba698c4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.89e82e4a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.be5b4731.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.c0a8e572.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.53277b9b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.b5e84503.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.ee3b78a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.4703897c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.7b45c24d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.661b503b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.b5a5563e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.7d8acf21.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.08c5da56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.6fcb0511.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.586ac594.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.42ef36d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.21d3f0df.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.083decf9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.df9aadf3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.1f6f6fd4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.64203426.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.fc22f031.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.84d3d603.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.13397bbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.bf3c65e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.d3fa4ec4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.c4e4aa5a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.4b2b9366.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.2b871110.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.83de661e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.2fe2a7b8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.4f8ab91a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.93a560f0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.ff9b02ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.9a589d38.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.fd0d6309.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/206.91258a7c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/207.97a9a7cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/208.068586df.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/209.e8ae167e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.9e242d55.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/210.7700790f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/211.02a8f008.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/212.c88aaa31.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/213.a3d42841.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/214.0ea123ad.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/215.363da77b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/216.5ef0c6df.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/217.496fbf45.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/218.7fdbfaa0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/219.072bfe3c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.41e32c08.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/220.bad53748.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/221.4aec9a33.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/222.962e07f0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/223.80bef3fc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/224.5ccc47c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/225.868c4e1f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/226.d514d835.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/227.e8d62e42.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/228.38fc66b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/229.7ef09c2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.ad64fd32.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/230.20d65180.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/231.2aa827c3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/232.611c598b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/233.8612b0c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/234.7091103a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/235.0c926e1e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/236.990522db.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/237.963b7a51.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/238.099d7956.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/239.29304bd1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.95d5bee3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/240.7f8efe5b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/241.bddeb220.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/242.664d53c3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/243.34506403.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/244.f64c98d2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/245.7171a527.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/246.c1f0ba42.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/247.b4ddfdcb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/248.78dcfc96.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/249.95e01078.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.2c31a2d8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/250.18c0fa56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/251.e7a8cd5e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/252.c5dd1360.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/253.b9c8af20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/254.188e98fb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/255.796f66b7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/256.e59b671e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/257.32374888.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/258.303c97e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.5051bac4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.f5bfcf0c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.a96e0af4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.c344fb4e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.5ca0f648.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.75b34f3f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.d3c46217.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.32a7285f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.8af8d0ac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.7d4ac3aa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.1047c63a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.252e2096.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.faa934f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.b6d68ca1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.76e84805.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.339b6c29.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.6651d05e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.3c372bc5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.a49fac4d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.15b55f2d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.13fd1f64.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.9e74c9a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.65dbe3ae.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.fcd2c348.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.b6bd2281.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.b32c499c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.d636de58.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.90642f20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.067f2f45.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.5b122c3c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.31598d5d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.42076d3c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.924f6a80.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.b0d261a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.7ffaafff.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.f9286d1b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.c702ed47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.337327ac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.d91660a6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.7857ff9c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.d66c1a90.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.d0b3454c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.a2bef6ff.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.4803395d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.11363928.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.800f2a51.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.3ce58fc0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.ee00b141.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.c683a471.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.56d128df.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.704c704a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.5bb51ce4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.516165e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.e6f565c7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.5881acbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.53fea5ca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.b405f652.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.18c1e470.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.5c3d7c56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.99837149.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.01bc7768.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.450b5f42.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.d989f7e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.1826268c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.eda87dda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.232262d6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.377a6ff3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.c00ac251.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.f804e958.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.4c676d99.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.3a349a4b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.df9c50a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.1ef2285d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.b4b18961.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.dfc168dc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.764c21fb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.0fe92df2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.f4ae310e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.8154c7cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.e85be741.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/vendors~docsearch.9a8918f9.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/" class="sidebar-link">Welcome</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#site-map" class="sidebar-link">Site Map</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#git-workflow" class="sidebar-link">Git Workflow</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#contributing" class="sidebar-link">Contributing</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#legal-notices" class="sidebar-link">Legal Notices</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Recently Added</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip256.html" class="sidebar-link">Tip 256 - Using Application Gateway Ingress Controller with Azure Kubernetes Service (AKS)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/AzureTipsAndTricks/blog/tip255.html" class="sidebar-link">Tip 255 - What's Azure Private Link and how can I get started?</a></li><li><a href="/AzureTipsAndTricks/blog/tip254.html" class="sidebar-link">Tip 254 - Use WAF to protect your web applications with Azure Front Door</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip254.html#securing-your-application-with-a-web-application-firewall-waf" class="sidebar-link">Securing your application with a Web Application Firewall (WAF)</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip254.html#bonus-live-streaming-software-development" class="sidebar-link">BONUS: Live streaming software development</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip253.html" class="sidebar-link">Tip 253 - Use Ingress Controller to access resources in an Azure Virtual Network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#intro" class="sidebar-link">Intro</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_1-create-an-nginx-ingress-controller" class="sidebar-link">1. Create an NGINX Ingress Controller</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_2-create-a-separate-namespace-and-ingress-controller-by-passing-the-above-file-name" class="sidebar-link">2. Create a separate namespace and ingress controller by passing the above file name.</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_3-check-the-status-of-nginx-controller" class="sidebar-link">3. Check the status of nginx controller</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_4-let-s-create-some-ingress-rules-to-see-the-example-in-action" class="sidebar-link">4. Let's create some ingress rules to see the example in action.</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_5-create-the-first-demo-application-from-a-helm-chart-with-the-following-command" class="sidebar-link">5. Create the first demo application from a Helm chart with the following command:</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_6-now-install-a-second-instance-of-the-demo-application" class="sidebar-link">6. Now install a second instance of the demo application.</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_7-create-an-ingress-route" class="sidebar-link">7. Create an Ingress Route</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_8-deploy-this-resource-to-your-kubernetes-cluster-using-kubectl-command" class="sidebar-link">8. Deploy this resource to your Kubernetes cluster using kubectl command</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#_9-time-to-validate-the-ingress-controller" class="sidebar-link">9. Time to validate the ingress controller</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#conclusion" class="sidebar-link">Conclusion</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip253.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip252.html" class="sidebar-link">Tip 252 - Securing your managed Databases in Azure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#intro" class="sidebar-link">Intro</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#_1-server-firewall" class="sidebar-link">1. Server Firewall</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#_2-integration-with-virtual-networks" class="sidebar-link">2. Integration with Virtual Networks</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#_3-private-endpoint-in-public-preview" class="sidebar-link">3. Private Endpoint (in public preview)</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#_4-sql-managed-instance" class="sidebar-link">4. SQL Managed Instance</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#conclusion" class="sidebar-link">Conclusion</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip252.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip251.html" class="sidebar-link">Tip 251 - Working With Azure Functions in VS Code and GitHub</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#what-s-covered-in-this-lab" class="sidebar-link">What's covered in this lab</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#setting-up-the-github-repo" class="sidebar-link">Setting up the GitHub repo</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#running-and-debugging-with-vs-code" class="sidebar-link">Running and Debugging with VS Code</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#create-a-branch" class="sidebar-link">Create a branch</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#update-master-branch" class="sidebar-link">Update master branch</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#deploying-to-azure" class="sidebar-link">Deploying to Azure</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip251.html#live-streaming-software-development" class="sidebar-link">Live streaming software development</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip250.html" class="sidebar-link">Tip 250 - Using Visual Studio Online</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip250.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip250.html#live-streaming-software-development" class="sidebar-link">Live streaming software development</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip249.html" class="sidebar-link">Tip 249 - Deploying a Node.js Web App using Visual Studio Code, GitHub Actions and Azure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip249.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip249.html#create-an-azure-app-service-web-app" class="sidebar-link">Create an Azure App Service web app</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip249.html#set-up-ci-cd-with-github-actions" class="sidebar-link">Set up CI/CD with GitHub Actions</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip249.html#test-out-your-app" class="sidebar-link">Test out your app!</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip249.html#live-streaming-software-development" class="sidebar-link">Live streaming software development</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip248.html" class="sidebar-link">Tip 248 - Top 5 VS Code extensions for Azure Developers</a></li><li><a href="/AzureTipsAndTricks/blog/tip247.html" class="sidebar-link">Tip 247 - Creating custom bindings for Azure Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#azure-functions-bindings" class="sidebar-link">Azure Functions Bindings</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#creating-a-custom-binding-for-azure-functions" class="sidebar-link">Creating a custom binding for Azure Functions</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip246.html" class="sidebar-link">Tip 246 - Azure Free Account? Is it really free?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip246.html#try-azure-for-free-for-12-months" class="sidebar-link">Try Azure for free, for 12 months</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip246.html#creating-a-free-azure-account" class="sidebar-link">Creating a free Azure account</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip246.html#start-using-azure" class="sidebar-link">Start using Azure</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip246.html#monitor-your-free-usage" class="sidebar-link">Monitor your free usage</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip246.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip245.html" class="sidebar-link">Tip 245 - Use Azure Key Vault to store sensitive data and access from Kubernetes Pods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip245.html#use-azure-key-vault-to-store-sensitive-data-and-access-from-kubernetes-pods" class="sidebar-link">Use Azure Key Vault to store sensitive data and access from Kubernetes Pods</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip245.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip245.html#create-a-service-principal-and-read-in-the-application-id" class="sidebar-link">Create a service principal and read in the application ID</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip244.html" class="sidebar-link">Tip 244 - How to use PowerShell in Azure Data Studio</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip244.html#azure-data-studio" class="sidebar-link">Azure Data Studio</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip244.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip244.html#use-powershell-with-azure-data-studio" class="sidebar-link">Use PowerShell with Azure Data Studio</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>.NET</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Active Directory</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Activity Log</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Advisor</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Configuration</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>APIM</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ASP.NET</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Automation</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Availability Zones</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Blueprints</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CDN</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cognitive Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Share</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Studio</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Dev Spaces</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Front Door</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Functions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>GitHub</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Information Protection</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Key Vault</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Lab Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Migrate</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Monitor</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pipeline</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Resource Manager</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Search</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Virtual Machines</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip235.html" class="sidebar-link">Tip 235 - VNC on Azure Linux VMs</a></li><li><a href="/AzureTipsAndTricks/blog/tip209.html" class="sidebar-link">Tip 209 - Prebuilt Terraform Image for Infrastructure Automation</a></li><li><a href="/AzureTipsAndTricks/blog/tip207.html" class="sidebar-link">Tip 207 - Reduce Brute Force attacks to Azure VMs</a></li><li><a href="/AzureTipsAndTricks/blog/tip201.html" class="active sidebar-link">Tip 201 - Creating Custom VM Images in Azure using Packer</a></li><li><a href="/AzureTipsAndTricks/blog/tip191.html" class="sidebar-link">Tip 191 - Serial console access with Azure VMs - Troubleshooting and diagnosing</a></li><li><a href="/AzureTipsAndTricks/blog/tip9.html" class="sidebar-link">Tip 9 - Quickly Connect to Windows VMs with RDP</a></li><li><a href="/AzureTipsAndTricks/blog/tip10.html" class="sidebar-link">Tip 10 - Quickly Connect to a Linux VM with SSH</a></li><li><a href="/AzureTipsAndTricks/blog/tip12.html" class="sidebar-link">Tip 12 - Easily Start, Restart, Stop or Delete Multiple VMs</a></li><li><a href="/AzureTipsAndTricks/blog/tip53.html" class="sidebar-link">Tip 53 - Prebuilt Azure VMs ready for Containers</a></li><li><a href="/AzureTipsAndTricks/blog/tip226.html" class="sidebar-link">Tip 226 - How to enable Accelerated Networking in existing Azure Virtual Machines?</a></li><li><a href="/AzureTipsAndTricks/blog/tip208.html" class="sidebar-link">Tip 208 - Set up a MEAN-based web application on a new Azure Linux virtual machine</a></li><li><a href="/AzureTipsAndTricks/blog/tip14.html" class="sidebar-link">Tip 14 - Generate SSH public key to log into Linux VM with Cloud Shell</a></li><li><a href="/AzureTipsAndTricks/blog/tip215.html" class="sidebar-link">Tip 215 - Reusing Network Service Groups across Virtual Machines</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Visual Studio Family</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page" data-v-0e4468e2> <div class="content default" data-v-0e4468e2><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>ðŸ”¥ Checkout our new Azure Developer page at <a href="https://azure.com/developer?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">azure.com/developer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>ðŸ’¡ Learn more : <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/build-image-with-packer?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">How to create custom VM images in Azure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <p>This post was brought to you by <strong><a href="https://twitter.com/kumarallamraju" target="_blank" rel="noopener noreferrer">Kumar Allamraju<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>.</p> <h4 id="creating-custom-vm-images-in-azure-using-packer"><a href="#creating-custom-vm-images-in-azure-using-packer" aria-hidden="true" class="header-anchor">#</a> Creating Custom VM Images in Azure using Packer</h4> <p>Azure provides rich support for open source tools to automate the infrastructure deployments. Some of the tools include Hashicorp's <a href="https://packer.io" target="_blank" rel="noopener noreferrer">Packer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.terraform.io" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In few simple steps, we'll learn how to create custom VM Linux images in Azure using Packer.</p> <p><strong>Packer</strong> is an open source tool for creating identical machine images for multiple platforms from a single source configuration. Packer is lightweight, runs on every major operating system, and is highly performant. It is capable of creating machine images for multiple platforms in parallel.</p> <p>Since Packer is a command line tool, we will be relying on Azure CLI and Packer to build machine images. Pls make sure <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.packer.io/intro/getting-started/install.html" target="_blank" rel="noopener noreferrer">Packer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are installed on your development machine prior to running the following steps.</p> <h4 id="_1-create-a-resource-group"><a href="#_1-create-a-resource-group" aria-hidden="true" class="header-anchor">#</a> 1. Create a Resource Group</h4> <ul><li><a href="https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az-group-create?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">az group create<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> -n myResourceGroup -l eastus</li></ul> <h4 id="_2-create-a-service-principal"><a href="#_2-create-a-service-principal" aria-hidden="true" class="header-anchor">#</a> 2. Create a service principal</h4> <p>Packer authenticates with Azure using a service principal.  An Azure service principal is a security identity that you can use with apps, services, and automation tools like Packer. You control and define the permissions as to what operations the service principal can perform in Azure.</p> <ul><li><a href="https://docs.microsoft.com/en-us/cli/azure/ad/sp?view=azure-cli-latest#az-ad-sp-create-for-rbac?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">az ad sp create-for-rbac<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> --query &quot;{ client_id: appId, client_secret: password, tenant_id: tenant }&quot;</li></ul> <img src="/AzureTipsAndTricks/files/rbac-output.png"> <p>Pls make a note of client_id, client_secret and tenant_id from the above output. We also need an Azure subscription ID to build the packer template</p> <ul><li><a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-show?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">az account show<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> --query &quot;{ subscription_id: id }&quot;</li></ul> <h4 id="_3-define-a-packer-template"><a href="#_3-define-a-packer-template" aria-hidden="true" class="header-anchor">#</a> 3. Define a packer template</h4> <p>After completing the above pre-requisites, we have to define a packer template in a json file. The template file typically contains the builders and provisioners that carry out the actual build process. Packer has a  <a href="https://www.packer.io/docs/builders/azure.html" target="_blank" rel="noopener noreferrer">provisioner for Azure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that allows us to define Azure resources, such as the service principal credentials created in the preceding step.</p> <h4 id="_4-create-a-custom-vm"><a href="#_4-create-a-custom-vm" aria-hidden="true" class="header-anchor">#</a> 4. Create a custom VM</h4> <p>Now create a file named <code>ubuntuVM.json</code> and copy the following</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
	&quot;builders&quot;: [{
		&quot;type&quot;: &quot;azure-arm&quot;,

		&quot;client_id&quot;: &quot;f5b6a5cf-fbdf-4a9f-b3b8-3c2cd00225a4&quot;,
		&quot;client_secret&quot;: &quot;0e760437-bf34-4aad-9f8d-870be799c55d&quot;,
		&quot;tenant_id&quot;: &quot;72f988bf-86f1-41af-91ab-2d7cd011db47&quot;,
		&quot;subscription_id&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx&quot;,

		&quot;managed_image_resource_group_name&quot;: &quot;myResourceGroup&quot;,
		&quot;managed_image_name&quot;: &quot;myPackerImage&quot;,

		&quot;os_type&quot;: &quot;Linux&quot;,
		&quot;image_publisher&quot;: &quot;Canonical&quot;,
		&quot;image_offer&quot;: &quot;UbuntuServer&quot;,
		&quot;image_sku&quot;: &quot;16.04-LTS&quot;,

		&quot;azure_tags&quot;: {
			&quot;dept&quot;: &quot;Engineering&quot;,
			&quot;task&quot;: &quot;Image deployment&quot;
		},

		&quot;location&quot;: &quot;East US&quot;,
		&quot;vm_size&quot;: &quot;Standard_DS2_v2&quot;
	}],
	&quot;provisioners&quot;: [{
		&quot;execute_command&quot;: &quot;chmod +x {{ .Path }}; {{ .Vars }} sudo -E sh '{{ .Path }}'&quot;,
		&quot;inline&quot;: [
			&quot;apt-get update&quot;,
			&quot;apt-get upgrade -y&quot;,
			&quot;apt-get -y install nginx&quot;,

			&quot;/usr/sbin/waagent -force -deprovision+user &amp;&amp; export HISTSIZE=0 &amp;&amp; sync&quot;
		],
		&quot;inline_shebang&quot;: &quot;/bin/sh -x&quot;,
		&quot;type&quot;: &quot;shell&quot;
	}]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>This template builds an Ubuntu 16.04 LTS image, installs NGNIX web server and deprovisions the VM. You can customize your packer template file with any custom tools or software of your choice.</p> <h4 id="_5-build-the-packer-image"><a href="#_5-build-the-packer-image" aria-hidden="true" class="header-anchor">#</a> 5. Build the Packer Image</h4> <p><code>./packer build ubuntuVM.json</code></p> <p>An example of the output from the preceding commands is as follows:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>==&gt; azure-arm: Running builder ...
    azure-arm: Creating Azure Resource Manager (ARM) client ...
==&gt; azure-arm: Creating resource group ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; Location          : â€˜East USâ€™
==&gt; azure-arm:  -&gt; Tags              :
==&gt; azure-arm:  -&gt;&gt; dept : Engineering
==&gt; azure-arm:  -&gt;&gt; task : Image deployment
==&gt; azure-arm: Validating deployment template ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; DeploymentName    : â€˜pkrdpswtxmqm7lyâ€™
==&gt; azure-arm: Deploying deployment template ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; DeploymentName    : â€˜pkrdpswtxmqm7lyâ€™
==&gt; azure-arm: Getting the VMâ€™s IP address ...
==&gt; azure-arm:  -&gt; ResourceGroupName   : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; PublicIPAddressName : â€˜packerPublicIPâ€™
==&gt; azure-arm:  -&gt; NicName             : â€˜packerNicâ€™
==&gt; azure-arm:  -&gt; Network Connection  : â€˜PublicEndpointâ€™
==&gt; azure-arm:  -&gt; IP Address          : â€˜40.76.218.147â€™
==&gt; azure-arm: Waiting for SSH to become available...
==&gt; azure-arm: Connected to SSH!
==&gt; azure-arm: Provisioning with shell script: /var/folders/h1/ymh5bdx15wgdn5hvgj1wc0zh0000gn/T/packer-shell868574263
    azure-arm: WARNING! The waagent service will be stopped.
    azure-arm: WARNING! Cached DHCP leases will be deleted.
    azure-arm: WARNING! root password will be disabled. You will not be able to login as root.
    azure-arm: WARNING! /etc/resolvconf/resolv.conf.d/tail and /etc/resolvconf/resolv.conf.d/original will be deleted.
    azure-arm: WARNING! packer account and entire home directory will be deleted.
==&gt; azure-arm: Querying the machineâ€™s properties ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; ComputeName       : â€˜pkrvmswtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; Managed OS Disk   : â€˜/subscriptions/guid/resourceGroups/packer-Resource-Group-swtxmqm7ly/providers/Microsoft.Compute/disks/osdiskâ€™
==&gt; azure-arm: Powering off machine ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; ComputeName       : â€˜pkrvmswtxmqm7lyâ€™
==&gt; azure-arm: Capturing image ...
==&gt; azure-arm:  -&gt; Compute ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; Compute Name              : â€˜pkrvmswtxmqm7lyâ€™
==&gt; azure-arm:  -&gt; Compute Location          : â€˜East USâ€™
==&gt; azure-arm:  -&gt; Image ResourceGroupName   : â€˜myResourceGroupâ€™
==&gt; azure-arm:  -&gt; Image Name                : â€˜myPackerImageâ€™
==&gt; azure-arm:  -&gt; Image Location            : â€˜eastusâ€™
==&gt; azure-arm: Deleting resource group ...
==&gt; azure-arm:  -&gt; ResourceGroupName : â€˜packer-Resource-Group-swtxmqm7lyâ€™
==&gt; azure-arm: Deleting the temporary OS disk ...
==&gt; azure-arm:  -&gt; OS Disk : skipping, managed disk was used...
Build â€˜azure-armâ€™ finished.

==&gt; Builds finished. The artifacts of successful builds are:
--&gt; azure-arm: Azure.ResourceManagement.VMImage:

ManagedImageResourceGroupName: myResourceGroup
ManagedImageName: myPackerImage
ManagedImageLocation: eastus

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><p>It takes a few minutes for Packer to build the VM, run the provisioners, and finally to clean up the deployment.</p> <h4 id="_6-create-a-vm-from-the-custom-image"><a href="#_6-create-a-vm-from-the-custom-image" aria-hidden="true" class="header-anchor">#</a> 6. Create a VM from the Custom Image</h4> <p>Now that our custom image is ready, we need to create a VM from the custom image with <a href="https://docs.microsoft.com/en-us/cli/azure/vm" target="_blank" rel="noopener noreferrer">az vm create<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Specify the image you created with the --image parameter. The following example creates a VM named myVM from myPackerImage and generates SSH keys if they do not already exist:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    az vm create \
    --resource-group myResourceGroup \
    --name myVM \
    --image myPackerImage \
    --admin-username azureuser \
    --generate-ssh-keys
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>If you wish to create VMs in a different resource group or region than your Packer image, specify the image ID rather than image name. You can obtain the image ID with <a href="https://docs.microsoft.com/en-us/cli/azure/image#az-image-show?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">az image show<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>It takes a few minutes to create the VM. Once the VM has been created, take note of the publicIpAddress displayed by the Azure CLI. This address is used to access the NGINX site via a web browser.</p> <p>To allow web traffic to reach your VM, open port 80 from the Internet with</p> <p><a href="https://docs.microsoft.com/en-us/cli/azure/vm" target="_blank" rel="noopener noreferrer">az vm open-port<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
--resource-group myResourceGroup --name myVM --port 80</p> <h4 id="_7-test-your-vm-and-nginx-web-server"><a href="#_7-test-your-vm-and-nginx-web-server" aria-hidden="true" class="header-anchor">#</a> 7. Test your VM and NGINX web server</h4> <p>Now point your web browser to the public IP address of your VM in the address bar. The default NGINX home page will be displayed as shown below:</p> <img src="/AzureTipsAndTricks/files/nginx.png"> <p>Although this posting focused on building Linux VM images, the same process can be applied to build Windows VMs. In the future episode, we will learn how to create a virtual machine using this custom VM image using <a href="https://www.terraform.io?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h4> <p>Pre-baked machine images have a lot of advantages, but most have been unable to benefit from them because images have been too tedious to create and manage. Packer changes all of this. In this posting, we have seen how easy it is easy to create custom images in Azure using Packer. Go and try it out!</p> <ul><li><a href="https://packer.io" target="_blank" rel="noopener noreferrer">Hashicorp's Packer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.packer.io/docs/builders/azure.html" target="_blank" rel="noopener noreferrer">Azure Resource Manager Builder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-macos?view=azure-cli-latest?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/build-image-with-packer?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Building Windows VMs using Packer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit" data-v-0e4468e2><div class="edit-link" data-v-0e4468e2><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip201.md" target="_blank" rel="noopener noreferrer" data-v-0e4468e2>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-0e4468e2 data-v-0e4468e2><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-0e4468e2><h2 data-v-0e4468e2>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 201 - Creating Custom VM Images in Azure using Packer by @mbcrump http://azuredev.tips/blog/tip201.html" target="_blank" class="share__button" data-v-0e4468e2><i class="fab fa-twitter" data-v-0e4468e2></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-0e4468e2><p class="inner" data-v-0e4468e2><span class="prev" data-v-0e4468e2>
        â†
        <a href="/AzureTipsAndTricks/blog/tip207.html" class="prev" data-v-0e4468e2>
          Tip 207 - Reduce Brute Force attacks to Azure VMs
        </a></span> <span class="next" data-v-0e4468e2><a href="/AzureTipsAndTricks/blog/tip191.html" data-v-0e4468e2>
          Tip 191 - Serial console access with Azure VMs - Troubleshooting and diagnosing
        </a>
        â†’
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.3c8037e7.js" defer></script><script src="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" defer></script><script src="/AzureTipsAndTricks/assets/js/117.166a91ba.js" defer></script>
  </body>
</html>
